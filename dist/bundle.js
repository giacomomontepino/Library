(()=>{const e=document.getElementById("button"),t=document.getElementById("category"),n=document.getElementById("bookList"),o=document.getElementById("loading");e.addEventListener("click",(()=>{!function(){const e=t.value.trim();if(""===e){const e=document.createElement("li");return e.textContent="Per favore, inserisci una categoria di ricerca",n.innerHTML="",void n.appendChild(e)}o.hidden=!1,n.innerHTML="",axios.get(`https://openlibrary.org/search.json?q=${e}&mode=everything`).then((e=>{const o=_.get(e.data,"docs",[]);if(n.innerHTML="",o&&o.length>0)o.forEach((e=>{const o=document.createElement("li");o.classList.add("item"),document.createElement("div");const i=_.get(e,"author_name",["Autore sconosciuto"]).join(",");if(o.textContent=`${e.title} by ${i}`,n.appendChild(o),_.get(e,"cover_i")){const t=`https://covers.openlibrary.org/b/id/${e.cover_i}-M.jpg`,n=document.createElement("img");n.src=t,n.alt=`${e.title} cover`,n.classList.add("cover"),o.appendChild(n)}const c=document.createElement("button");c.textContent="Info",c.addEventListener("click",(()=>{var n,i;n=e.key,i=o,t.value.trim(),axios.get(`https://openlibrary.org${n}.json`).then((e=>{const t=_.get(e.data,"description","Descrizione non disponibile"),n="string"==typeof t?t:_.get(t,"value","Descrizione non disponibile"),o=document.createElement("p");o.textContent=n,i.appendChild(o)})).catch((e=>{console.error("Errore durante la richiesta",e);const t=document.createElement("p");t.textContent="Descrizione non disponibile",document.body.appendChild(t)}))})),o.appendChild(c)}));else{const e=document.createElement("li");e.textContent="Non ci sono libri in questa categoria",n.appendChild(e)}})).catch((e=>{console.error("Errore durante la richiesta",e);const t=document.createElement("li");t.textContent="Ricerca dei libri fallita, per favore riprovare.",n.appendChild(t)})).finally((()=>{console.log("nascondi caricamento (finally)"),o.hidden=!0}))}()}))})();